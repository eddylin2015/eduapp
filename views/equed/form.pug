extends ./base.pug
block content
  script.
    function Load(){
      let codetxt=   ["let TE={St:'',Val:''};", 
          'let a=Math.floor(Math.random()*10);', 
          'let b=Math.floor(Math.random()*10);', 
          'let c=Math.floor(Math.random()*10);', 
          "TE.St=`${a}+${b}+${c}`;", 
          "TE.Val=a+b+c;", 
          ''].join('\n')
      data:editor.setValue(codetxt);
      /*data:editor.getValue()
      $.post( "api/readequ",{data:editor.getValue()}, function( data ) {
        var x = document.getElementById("myframe");
        x.src="trianing.mlx2.jsp?ft=f1003"
      });
      */
    }  
      function showTab(x){
        if(  x==1 ) document.getElementById("CODEIDE").style.display=document.getElementById("CODEIDE").style.display=="block"?"none":"block";
        if(  x==2 ) document.getElementById("ANSTAB").style.display=document.getElementById("ANSIDE").style.display=="block"?"none":"block";
        if(  x==3 ) document.getElementById("FRMIDE").style.display=document.getElementById("FRMIDE").style.display=="block"?"none":"block";        
      }

    function SaveRun(){
      var myElement = document.getElementById("container");
      $.post( "saveequ",{data:editor.getValue()}, function( data ) {
        alert(data);
        var x = document.getElementById("myframe");
        x.src="trianing.mlx2.jsp?ft=f1003"
      });
    }
  <h2>TMS Equ Editor</h2>
  <input type=checkbox name=code_name1 value=EQUTAB onclick="showTab(1);">
  <input type=checkbox name=code_name2 value=ANSTAB onclick="showTab(2);">
  <input type=checkbox name=code_name3 value=UITAB onclick="showTab(3);">
  <button onclick='Load();'>Load</button>
  <button onclick='SaveRun();'>SaveRun</button>
  table
    tr
      td#CODEIDE
        div#container(style="width: 500px; height: 600px; border: 1px solid grey")
      td#ANSIDE
        div#container_ans(style="width: 500px; height: 600px; border: 1px solid grey")
      td#FRMIDE
        iframe#myframe(style="width: 500px; height: 600px;")
  script.
      var require = { paths: { vs: 'https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/vs' } };
  script(src="https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/vs/loader.js")
  script(src="https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/vs/editor/editor.main.nls.js")
  script(src="https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/vs/editor/editor.main.js")
  script.
      var editor = monaco.editor.create(document.getElementById('container'), {
          value: ["let TE={St:'',Val:''};", 
          'let a=Math.floor(Math.random()*10);', 
          'let b=Math.floor(Math.random()*10);', 
          'let c=Math.floor(Math.random()*10);', 
          ''].join('\n'),
          language: 'javascript'
      });
      var editor_ans = monaco.editor.create(document.getElementById('container_ans'), {
          value: ["function CheckAns(Ans){",
          "\treturn 0;", 
          '}', 
          ''].join('\n'),
          language: 'javascript'
      });


