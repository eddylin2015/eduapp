-- MySQL dump 10.13  Distrib 8.0.21, for Win64 (x86_64)
--
-- Host: localhost    Database: maths
-- ------------------------------------------------------
-- Server version	8.0.21

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `qiztx`
--

DROP TABLE IF EXISTS `qiztx`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `qiztx` (
  `id` int unsigned NOT NULL AUTO_INCREMENT,
  `gid` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `qtitle` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `qgrade` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `qfield` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `tx` int DEFAULT NULL,
  `acnt` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `atype` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `qizcode` text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci,
  `anscode` text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci,
  `qnote` text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci,
  `snote` text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci,
  `pflag` int DEFAULT NULL,
  `pdate` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `createbyid` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `createbyname` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `createdate` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `modifybyid` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `modifybyname` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `modifydate` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `gid_UNIQUE` (`gid`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `qiztx`
--

LOCK TABLES `qiztx` WRITE;
/*!40000 ALTER TABLE `qiztx` DISABLE KEYS */;
INSERT INTO `qiztx` VALUES (1,'f1003','整式的加減法練習','中一','數學',2,'[1,1,1,1,1,1,1,1,1,1]','[\"t\",\"t\",\"t\",\"t\",\"t\",\"t\",\"t\",\"t\"]','// 工具箱 tmsU tmsCalcu\r\nlet TE={St:\'\',Val:\'\',ACnt:1, ATyp:\'t\',Range:[]};//n: num,t: txt, m: mathinput\r\nlet TOp = [\"+\", \"-\"];\r\nlet NumS=[0,0,0,0,0];\r\nlet OPrS=[\"+\",\"+\",\"+\",\"+\",\"+\"];\r\nfor (let i = 0; i < 5; i++) {\r\n  NumS[i] = tmsU.TakeARnd(-9, 9, 0, 0, 0, 0);\r\n  OPrS[i] = tmsU.TakeAOpr([\"+\",\"-\"]);\r\n}\r\nswitch (Tx) {\r\n  case 1:\r\n    TE.St = `(${NumS[0]}x  + ${NumS[1]} ) + ( ${NumS[2]}x  + ${NumS[3]} )`;\r\n    TE.Val = `${NumS[0] + NumS[2]}x+${NumS[1] + NumS[3]}`;\r\n    break;\r\n  case 2:\r\n    TE.St = `(${NumS[0]}x^2  + ${NumS[1]}x ) + ( ${NumS[2]}x^2  + ${NumS[3]}x )`;\r\n    TE.Val = `${NumS[0] + NumS[2]}x^2 +${NumS[1] + NumS[3]}x`;\r\n    break;\r\n  case 3: break;\r\n  case 4: break;\r\n}\r\nTE.St=tmsU.AdjExpFmt(TE.St);\r\n\r\n','//Utils :  tmsU  tmsCalcu\r\n//GlobleVarible: IAns1,IAns2,TE,\r\nlet res=false;\r\nif(TE.ACnt==1 && TE.ATyp==\'t\') \r\n{\r\n   for(let i=1;i<10;i++){ //when x is 1-10 ,eq val, is true;\r\n       let Val1 = tmsCalcu.RunExpr(IAns1,{x:i}) ;\r\n       let Val2 = tmsCalcu.RunExpr(TE.Val,{x:i}) ;\r\n       if(Val1 != Val2) { console.log(Val1,Val2) ; return false; } else {res=true;}\r\n   }       \r\n}\r\nreturn res;','<p>整式的加減法練習</p>\r\n\r\n<p>題型1：\\(( mx+p)+(nx+q)\\) 作答: ax + b</p>\r\n\r\n<p>題型2：\\(( mx^2+px)+(nx^2+qx)\\) 作答: ax^2 + bx 註: x^2 表示x的2次方,即 \\(x^2\\)</p>\r\n\r\n<p>例題</p>\r\n\r\n<p>1. \\(x+x+x \\) 作答: 3x</p>\r\n\r\n<p>2. \\((x+7)-(x-9)\\) 作答: 16 ，</p>\r\n\r\n<p>3. \\(2x^2 -5x-x^2+12x\\) 作答: x^2 + 7x</p>\r\n\r\n<p>4. \\((x^2 +11x)+(3x^2+3x)\\) 作答: 4x^2 + 14x ，</p>\r\n','<p>整式的加減法練習</p>\r\n\r\n<p>題型1：\\(( mx+p)+(nx+q)\\) 作答: ax + b</p>\r\n\r\n<p>題型2：\\(( mx^2+px)+(nx^2+qx)\\) 作答: ax^2 + bx 註: x^2 表示x的2次方,即 $x^2$</p>\r\n\r\n<p>例題</p>\r\n\r\n<p>1. \\(x+x+x \\) 作答: 3x</p>\r\n\r\n<p>2. \\((x+7)-(x-9)\\) 作答: 16 ，</p>\r\n\r\n<p>3. \\(2x^2 -5x-x^2+12x\\) 作答: x^2 + 7x</p>\r\n\r\n<p>4. \\((x^2 +11x)+(3x^2+3x)\\) 作答: 4x^2 + 14x ，</p>\r\n',1,'2020-10-17','lam mou','lam mou','2020-10-16','cool','lammou','2020-10-19'),(2,'f3001','一元二次方程式','中三','數學',4,'[2,2,2,2,2,1,1,1,1,1]','[\"t\",\"t\",\"t\",\"t\",\"t\",\"t\",\"t\",\"t\"]','// 工具箱 Utils: tmsU,tmsCalcu ; 外部變量 Tx\r\nlet TE={St:\'\',Val:\'\',ACnt:2, ATyp:\'t\',Range:[]};//num,txt,mathinput\r\nlet TOp = [\"+\", \"-\"];\r\nlet a = 1, b = 1, c = 1, m = 1, p = 1, n = 1, q = 1;\r\nswitch (Tx) {\r\n  case 1:\r\n      p = tmsU.TakeARnd(-10, 10, 0, 1, 0, 0);\r\n      q = tmsU.TakeARnd(-10, 10, 0, 2, 0, -1* p);\r\n      b = p + q; c = p * q;\r\n      break;\r\n  case 2:\r\n      p = tmsU.TakeARnd(-15, 15, 0, 1, 0, 0);\r\n      q = tmsU.TakeARnd(-15, 15, 0, 2, 0, -1*p);\r\n      b = p + q; c = p * q;\r\n      break;\r\n  case 3:\r\n      m = tmsU.TakeARnd(0, 5, 0, 1, 0, 0);\r\n      n = tmsU.TakeARnd(0, 5, 0, 1, 0, 0);\r\n      a = m * n;\r\n      p = tmsU.TakeARnd(-10, 10, 0, 1, 0, 0);\r\n      q = tmsU.TakeARnd(-10, 10, 0, 2, 0, Math.floor(p*n/m));\r\n      b = p * n + q * m; c = p * q;\r\n      break;\r\n  case 4:\r\n      m = tmsU.TakeARnd(-5, 5, 0, 1, 0, 0);\r\n      n = tmsU.TakeARnd(0, 5, 0, 1, 0, 0);\r\n      if(m*n>0){n=-1*n;}\r\n      a = m * n;\r\n      p = tmsU.TakeARnd(-10, 10, 0, 1, 0, 0);\r\n      q = tmsU.TakeARnd(-10, 10, 0, 2, 0, Math.floor(p*n/m));\r\n      b = p * n + q * m; c = p * q;\r\n      break;\r\n}\r\nTE.St =tmsU.AdjExpFmt(`${a}x^2+${b}x+${c}`)+\"=0\";\r\nlet hcfp=calc.HCF(p,m)\r\nTE.Range[1] = `${(p * -1)/hcfp}/${m/hcfp}`\r\nlet hcfq=calc.HCF(q,n)\r\nTE.Range[2] = `${(q * -1)/hcfq}/${n/hcfq}`    \r\nTE.Val = `(${TE.Range[1]})(${TE.Range[2]})`;\r\nTE.CalcVal =TE.Val;\r\n','//IAns1,IAns,TE\r\nlet r=[false,false,false];\r\nlet v=[];let a=[];\r\nif (TE.ACnt == 2 && TE.ATyp == \'t\') {\r\n    v[1] = tmsCalcu.RunExpr(TE.Range[1])\r\n    v[2] = tmsCalcu.RunExpr(TE.Range[2])\r\n    a[1] = tmsCalcu.RunExpr(IAns1)\r\n    a[2] = tmsCalcu.RunExpr(IAns2)\r\n    for(let i=1;i<3;i++)\r\n      for(let j=1;j<3;j++)\r\n        if(v[i]==a[j]) r[i]=true;\r\n    if(r[1] && r[2]) return true;\r\n}\r\nreturn false;','<p>一元二次方程式 TX={1,2,3,4}</p>\r\n\r\n<p>\\(ax^2+bx+c=0\\) 即( mx+p)(nx+q)=0的解一元二次方程式</p>\r\n\r\n<p>題型1：</p>\r\n\r\n<p>1. \\(x^2 &ndash;5 x &ndash; 6 =0\\) 作答: 6 ，-1</p>\r\n\r\n<p>2. \\(x^2 &ndash; 2x &ndash; 15=0\\) 作答: 5，-3</p>\r\n\r\n<p>題型2：</p>\r\n\r\n<p>1. \\(x^2 -6x &ndash; 55=0 \\) 作答: 11，-5</p>\r\n\r\n<p>2. \\(x^2 + 23x+132=0 \\) 作答: -11，-12</p>\r\n\r\n<p>題型3：</p>\r\n\r\n<p>1. \\(6x^2 + x &ndash; 12=0 \\) 作答: -3/2, 4/3 註: -a/b 表示分數</p>\r\n\r\n<p>2. \\(3x^2 -7x &ndash;6=0 \\) 作答: -2/3 , 3</p>\r\n\r\n<p>題型4：</p>\r\n\r\n<p>1. \\(-6x^2 + 5x +6=0 \\) 作答: 3/2 , -2/3</p>\r\n\r\n<p>2. \\(-3x^2 &ndash;10x &ndash;8=0 \\) 作答: -4/3, -2</p>\r\n','<p>一元二次方程式 TX={1,2,3,4}</p>\r\n\r\n<p>\\(ax^2+bx+c=0\\) 即( mx+p)(nx+q)=0的解一元二次方程式</p>\r\n\r\n<p>題型1：</p>\r\n\r\n<p>1. \\(x^2 &ndash;5 x &ndash; 6 =0\\) 作答: 6 ，-1</p>\r\n\r\n<p>2. \\(x^2 &ndash; 2x &ndash; 15=0\\) 作答: 5，-3</p>\r\n\r\n<p>題型2：</p>\r\n\r\n<p>1. \\(x^2 -6x &ndash; 55=0 \\) 作答: 11，-5</p>\r\n\r\n<p>2. \\(x^2 + 23x+132=0 \\) 作答: -11，-12</p>\r\n\r\n<p>題型3：</p>\r\n\r\n<p>1. \\(6x^2 + x &ndash; 12=0 \\) 作答: -3/2, 4/3 註: -a/b 表示分數</p>\r\n\r\n<p>2. \\(3x^2 -7x &ndash;6=0 \\) 作答: -2/3 , 3</p>\r\n\r\n<p>題型4：</p>\r\n\r\n<p>1. \\(-6x^2 + 5x +6=0 \\) 作答: 3/2 , -2/3</p>\r\n\r\n<p>2. \\(-3x^2 &ndash;10x &ndash;8=0 \\) 作答: -4/3, -2</p>\r\n',1,'2020-10-18','lam mou','lam mou','2020-10-16','cool','lammou','2020-10-19'),(3,'f2003','因式分解','中二','數學',1,'[1,1,1,1,1,1,1,1,1,1,1]','[\"t\",\"m\",\"t\",\"t\",\"t\",\"t\",\"t\",\"m\"]','//定義變量:Tx [1:4]  \r\n//工具集: tmsU tmsCalcu\r\nlet TE = { St: \'\', Val: \'\', ACnt: 1, ATyp: \'t\', Range: [] };//num,txt,mathinput\r\nswitch (Tx) {\r\n    case 1:\r\n        //題型1：s1=ab x^p y^q, s2=ac x^u y^v, s3= ad x^g y^h, \r\n        //s1’= bx^(p-m)y^(q-n), s2’= cx^(u-m)y^(v-n), s3’= dx^(g-m)y^(h-n), \r\n        //s1 +s2 +s3=axmyn(s1’+ s2’+ s3’) (s1≠s2≠s3), s1 ,s2 ,s3亂序,s和s’的順序相同\r\n        //(|a|,|b|,|c|,|d|,|k|)<13 整數,  -1<(p,q,u,v,g,h)<11整數,   (a,b,c)≠0, x≠y,\r\n        //m=min(p,u,g), n=min(q,v,h),  x,y=(a至z內隨機字母)或(a至z內隨機字母 ± a至z內隨機字母)或(a至z內隨機字母 ± k)*/\r\n        let a = tmsU.TakeARnd(-9, 9, 0, 2, 0, 0);\r\n        let b = tmsU.TakeARnd(-9, 9, 0, 2, 0, 0);\r\n        let c = tmsU.TakeARnd(-9, 9, 0, 2, 0, 0);\r\n        let d = tmsU.TakeARnd(-9, 9, 0, 0, 0, 0);\r\n        let k = tmsU.TakeARnd(-9, 9, 0, 0, 0, 0);\r\n        let p = tmsU.TakeARnd(-1, 9, 0, 2, 0, 0);\r\n        let q = tmsU.TakeARnd(-1, 9, 0, 2, 0, 0);\r\n        let u = tmsU.TakeARnd(-1, 9, 0, 0, 0, 0);\r\n        let v = tmsU.TakeARnd(-1, 9, 0, 0, 0, 0);\r\n        let g = tmsU.TakeARnd(-1, 9, 0, 0, 0, 0);\r\n        let h = tmsU.TakeARnd(-1, 9, 0, 0, 0, 0);\r\n        let m = p > u ? u : p; m = m > g ? g : m;\r\n        let n = q > v ? v : q; n = n > h ? h : n;\r\n        let s1 = `${a*b}x^${p} y^${q}`\r\n        let s2 = `${a*c}x^${u} y^${v}`\r\n        let s3 = `${a}${d}x^${g}y^${h}`\r\n        let s1_ = `${b}*x^(${p-m})* y^(${q-n})`\r\n        let s2_ = `${c}*x^(${u-m})* y^(${v-n})`\r\n        let s3_ = `${d}*x^(${g-m})* y^(${h-n})`\r\n        TE.St =`${s1}+${s2}+${s3}`\r\n        TE.Val = `${a}*x^${m}*y^${n}*(${s1_}+ (${s2_})+ (${s3_}))`\r\n        console.log(TE.Val)\r\n        //TE.St=tmsU.MJaxFmt(TE.St);  tmsU.AdjExpFmt(\r\n        break;\r\n    case 2:\r\n    case 3: break;\r\n    case 4: break;\r\n}\r\nreturn TE;','//定義變量:IAns1,IAns2,TE\r\nif(TE.ACnt==1 && TE.ATyp==\'num\') return IAns1==TE.Val;','<p>因式分解 TX={1-7}</p>\r\n\r\n<p>題型1：提公因式</p>\r\n\r\n<p>1.\\(30x^6y^2-27x^3y^7+6x^5\\) 作答: 3x^(10x^3y^2-9y^7+2x^2)</p>\r\n\r\n<p>2.\\(-72x^2y^3+30x^3y^2\\) 作答: 6x^2y^2(-12y+5x)</p>\r\n\r\n<p>題型2：併項法</p>\r\n\r\n<p>1.\\(-15xz+10xw-12yz+8yw\\) 作答: (5x+4y)(-3z+2w) 或 (4y+5x)(2w-3z) ,...</p>\r\n\r\n<p>2.\\(30ac-24ad-20bc+16bd\\) 作答: (3a-2b)(10c-8d) 或 (3a-2b)(-8d+10c),...</p>\r\n\r\n<p>題型3：十字相乘</p>\r\n\r\n<p>1.\\( x^2+13x+22\\) 作答: (x+2)(x+11)</p>\r\n\r\n<p>2. \\((x+y)2+5(x+y)-24\\) 作答:(x+y-3)(x+y+8)</p>\r\n\r\n<p>題型4</p>\r\n\r\n<p>1. \\(8x^2+34x+21\\) 作答: (2x+7)(4x+3),(2x+7)(4x+3)</p>\r\n\r\n<p>2. \\(5(x+y)^2-64(x+y)-13\\) 作答: ((x+y)-13)(5(x+y)+1),(x+y-13)(5x+5y+1),(2x+7)(4x+3),(5x+5y+1)(x+y-13)</p>\r\n\r\n<p>題型5</p>\r\n\r\n<p>1. \\(12x^2-21xy+9y^2\\) 作答:3(4x-3y)(x-y)</p>\r\n\r\n<p>2. \\(-2(x+y)^2-8a(x+y)+10a^2\\) 作答:2((x+y)+5a)(-(x+y)+a),2(x+y+5a)(-x-y+a),2(-x-y+a)(x+y+5a)</p>\r\n\r\n<p>題型6：運用乘法公式</p>\r\n\r\n<p>1. \\(36x^2-9y^2\\) 作答:9(2x-y)(2x+y),9(2x+y)(2x-y)</p>\r\n\r\n<p>2. \\((x+y)^2-49\\) 作答:(x+y+7)(x+y-7),(x+y-7)(x+y+7),(x+y+7)(x+y-7)</p>\r\n\r\n<p>題型7：</p>\r\n\r\n<p>1. \\(64x^2+48xy+9y^2\\) 作答:(8x+3y)^2</p>\r\n\r\n<p>2. \\((x+y)^4-2(x+y)^2z^2+z^4\\) 作答:((x+y)^2-z^2)^2, (x+y+z)^2(x+y-z)^2</p>\r\n','<p>因式分解 TX={1-7}</p>\r\n\r\n<p>題型1：提公因式</p>\r\n\r\n<p>1.\\(30x^6y^2-27x^3y^7+6x^5\\) 作答: 3x^(10x^3y^2-9y^7+2x^2)</p>\r\n\r\n<p>2.\\(-72x^2y^3+30x^3y^2\\) 作答: 6x^2y^2(-12y+5x)</p>\r\n\r\n<p>題型2：併項法</p>\r\n\r\n<p>1.\\(-15xz+10xw-12yz+8yw\\) 作答: (5x+4y)(-3z+2w) 或 (4y+5x)(2w-3z) ,...</p>\r\n\r\n<p>2.\\(30ac-24ad-20bc+16bd\\) 作答: (3a-2b)(10c-8d) 或 (3a-2b)(-8d+10c),...</p>\r\n\r\n<p>題型3：十字相乘</p>\r\n\r\n<p>1.\\( x^2+13x+22\\) 作答: (x+2)(x+11)</p>\r\n\r\n<p>2. \\((x+y)2+5(x+y)-24\\) 作答:(x+y-3)(x+y+8)</p>\r\n\r\n<p>題型4</p>\r\n\r\n<p>1. \\(8x^2+34x+21\\) 作答: (2x+7)(4x+3),(2x+7)(4x+3)</p>\r\n\r\n<p>2. \\(5(x+y)^2-64(x+y)-13\\) 作答: ((x+y)-13)(5(x+y)+1),(x+y-13)(5x+5y+1),(2x+7)(4x+3),(5x+5y+1)(x+y-13)</p>\r\n\r\n<p>題型5</p>\r\n\r\n<p>1. \\(12x^2-21xy+9y^2\\) 作答:3(4x-3y)(x-y)</p>\r\n\r\n<p>2. \\(-2(x+y)^2-8a(x+y)+10a^2\\) 作答:2((x+y)+5a)(-(x+y)+a),2(x+y+5a)(-x-y+a),2(-x-y+a)(x+y+5a)</p>\r\n\r\n<p>題型6：運用乘法公式</p>\r\n\r\n<p>1. \\(36x^2-9y^2\\) 作答:9(2x-y)(2x+y),9(2x+y)(2x-y)</p>\r\n\r\n<p>2. \\((x+y)^2-49\\) 作答:(x+y+7)(x+y-7),(x+y-7)(x+y+7),(x+y+7)(x+y-7)</p>\r\n\r\n<p>題型7：</p>\r\n\r\n<p>1. \\(64x^2+48xy+9y^2\\) 作答:(8x+3y)^2</p>\r\n\r\n<p>2. \\((x+y)^4-2(x+y)^2z^2+z^4\\) 作答:((x+y)^2-z^2)^2, (x+y+z)^2(x+y-z)^2</p>\r\n',0,'','cool','lammou','2020-10-18','cool','lammou','2020-10-19'),(4,'L0001','代數輸入面板及運算器演試','小三','數學',1,'[1,1,1,1,1,1,1,1,1,1,1]','[\"m\",\"m\",\"t\",\"t\",\"t\",\"t\",\"t\",\"m\"]','//定義變量:Tx : [1:9]\r\n//工具集: tmsU, tmsCalcu\r\nlet TE={St:\'\',Val:\'\',ACnt:1, ATyp:\'m\',Range:[]};//n,t,m\r\nTE.St=`輸入算式, 電腦運算結果x:2,y:3,z:4`;\r\nTE.Val=0;\r\n','/////////////////////////Calcu//////////////\r\nvar KeySigns = {}\r\nKeySigns[\'\\t\'] = 0;\r\nKeySigns[\'\\n\'] = 0;\r\nKeySigns[\'\\r\'] = 0;\r\nKeySigns[\';\'] = -1;\r\nKeySigns[\' \'] = 0;\r\nKeySigns[\'=\'] = 1;\r\nKeySigns[\'^\'] = 6;\r\nKeySigns[\'*\'] = 4;\r\nKeySigns[\'/\'] = 5;\r\nKeySigns[\'+\'] = 3;\r\nKeySigns[\'-\'] = 3;\r\nKeySigns[\':\'] = 2;\r\nKeySigns[\',\'] = 2;\r\nclass myCalcu {\r\n    RunVMCalc(St) { alert(\"no implement!\"); }\r\n    RunExpr(St, VSet={x:1},trace=false) {\r\n        let tmsU=new TmsUts();\r\n        let St1 = St.toLowerCase();\r\n        let Vkeys = Object.keys(VSet);\r\n        console.log(Vkeys)\r\n        for(let i=0;i<Vkeys.length;i++)\r\n        {\r\n            let xKey=Vkeys[i];\r\n            let xVal=VSet[xKey];\r\n            let r_ = new RegExp(`[0-9]+${xKey}`, \'g\');\r\n            let mr_ = St1.match(r_)\r\n            if (mr_)\r\n                for (let j = 0; j < mr_.length; j++) {\r\n                    let r_mr_ = mr_[j].replace(`${xKey}`, `*${xKey}`)\r\n                    St1 = St1.replace(mr_[j], r_mr_)\r\n                }\r\n            let x_r= new RegExp(`${xKey}`, \'g\');   \r\n            St1 = St1.replace(x_r, `${xVal}`)\r\n        }\r\n        console.log(St1)\r\n        let cc_list1 = this.Sytex_cclist(St1);\r\n        cc_list1 = tmsU.AdjExpFmtList(cc_list1);\r\n        console.log(cc_list1)\r\n        let yy1 = [];\r\n        this.proc2opt(cc_list1, yy1);\r\n        return this.exprCalc(yy1);\r\n        return 0;\r\n    }\r\n    RunFrcExpr(St, VSet = { x: 1 }) {\r\n        console.log(St);\r\n        let cc_list = this.Sytex_cclist(St);\r\n        console.log(\"cc_list\",cc_list);\r\n        let frc_yy = [];\r\n        this.procfrc2opt(cc_list, frc_yy);\r\n        console.log(frc_yy);\r\n        let frc_val=this.exprfrcCalc(frc_yy); console.log(\"frc_val=\", frc_val);\r\n        return frc_val;        \r\n        return \"-1/2\";\r\n    }\r\n    //處理 二目運算符如 = + - * / ( ) 生成樹狀型式//static TreeItem\r\n    proc2opt(l1, prenode) {\r\n        let cnt = 0;\r\n        while (l1.length == 1 && l1[0][0] == \"(\") {\r\n            l1 = this.Sytex_cclist(l1[0].substring(1, l1[0].length - 1));\r\n            cnt++; if (cnt > 10) break;\r\n        }\r\n        /*\r\n          if(l1[0] == \'(\' && l1[l1.length - 1] == \')\') {\r\n              l1.splice(l1.length - 1, 1);\r\n              l1.splice(0, 1);\r\n          }*/\r\n        if (l1.length <= 1) {\r\n            prenode.push(l1[0]);\r\n            return;\r\n        }\r\n        else {\r\n            let opt_ = [];\r\n            for (let si = 0; si < l1.length; si++) {\r\n                let s = l1[si];\r\n                if (s[0] == \'(\' && s[s.length - 1] == \')\') {\r\n                    this.proc2opt(this.Sytex_cclist(s), prenode);\r\n                } else\r\n                    if (s.length == 1 && Object.keys(KeySigns).indexOf(s) >= 0) {\r\n                        if (opt_.length == 0) {\r\n                            opt_.push(s);\r\n                        }\r\n                        else if (\r\n                            KeySigns[s] <= KeySigns[opt_[opt_.length - 1]]\r\n                        ) {\r\n                            while (KeySigns[s] <= KeySigns[opt_[opt_.length - 1]]) {\r\n                                prenode.push(opt_.pop());\r\n                            }\r\n                            opt_.push(s)\r\n\r\n                        } else {\r\n                            opt_.push(s)\r\n                        }\r\n                    }\r\n                    else {\r\n                        prenode.push(s);\r\n                    }\r\n            }\r\n            while (opt_.length > 0) {\r\n                prenode.push(opt_.pop())\r\n            }\r\n        }\r\n    }\r\n\r\n    Sytex_cclist(data,VSet={x:1},trace=false) {\r\n        let cc_list = []\r\n        let lcnt = 0;\r\n        let blockOpt = 0;\r\n        for (let j = 0; j < data.length; j++) {\r\n            let c = data[j];\r\n\r\n            switch (c) {\r\n                case \'(\': ;\r\n                    blockOpt += 10;\r\n                    if (blockOpt == 10) { cc_list[lcnt] = c } else { cc_list[lcnt] += c; }\r\n                    break;\r\n                case \')\': ;\r\n                    blockOpt -= 10;\r\n                    cc_list[lcnt] += c;\r\n                    if (blockOpt == 0) {\r\n                        //cc_list[lcnt]=cc_list[lcnt].substring(1,cc_list[lcnt].length - 1);\r\n                        lcnt++;\r\n                    }\r\n                    break;\r\n                case \':\': break;\r\n                case \',\': break;\r\n                case \'\\t\': break;\r\n                case \'\\n\': break;\r\n                case \'\\r\': break;\r\n                case \';\': break;\r\n                case \' \': break;\r\n                case \'=\': break;\r\n                case \'^\': ;\r\n                case \'*\': ;\r\n                case \'/\': ;\r\n                case \'+\': ;\r\n                case \'-\': ;\r\n                    if (blockOpt > 0) { cc_list[lcnt] += c; } else { cc_list[lcnt++] = c; }\r\n                    break;\r\n                case \'0\': ;\r\n                case \'1\': ;\r\n                case \'2\': ;\r\n                case \'3\': ;\r\n                case \'4\': ;\r\n                case \'5\': ;\r\n                case \'6\': ;\r\n                case \'7\': ;\r\n                case \'8\': ;\r\n                case \'9\': ;\r\n                case \'.\': ;\r\n\r\n                    if (blockOpt > 0) { cc_list[lcnt] += c; }\r\n                    else if (lcnt == 1 && cc_list[lcnt - 1] == \"-\") {\r\n                        cc_list[lcnt - 1] += c;\r\n                    } else if (lcnt > 1 && cc_list[lcnt - 1] == \"-\" && cc_list[lcnt - 2] == \"(\") {\r\n                        cc_list[lcnt - 1] += c;\r\n                    }\r\n                    else if (lcnt > 0 && /\\d+|d+[.]|d+[.]d+/.test(cc_list[lcnt - 1])) {          // /\\d+|d+[.]d+/.  \r\n                        cc_list[lcnt - 1] += c;\r\n                    } else {\r\n                        cc_list[lcnt++] = c;\r\n                    }\r\n                    break;\r\n                default:\r\n                // cc_list[lcnt++]=c;                \r\n            }\r\n        }\r\n        return cc_list;\r\n    }\r\n    Sytex_cclist_x(data,VSet={x:1},trace=false) {\r\n        let Vkeys = Object.keys(VSet);\r\n        let cc_list = []\r\n        let lcnt = 0;\r\n        let blockOpt = 0;\r\n        for (let j = 0; j < data.length; j++) {\r\n            let c = data[j];\r\n            switch (c) {\r\n                case \'(\': ;\r\n                    blockOpt += 10;\r\n                    if (blockOpt == 10) { cc_list[lcnt] = c } else { cc_list[lcnt] += c; }\r\n                    break;\r\n                case \')\': ;\r\n                    blockOpt -= 10;\r\n                    cc_list[lcnt] += c;\r\n                    if (blockOpt == 0) {\r\n                        //cc_list[lcnt]=cc_list[lcnt].substring(1,cc_list[lcnt].length - 1);\r\n                        lcnt++;\r\n                    }\r\n                    break;\r\n                case \':\': break;\r\n                case \',\': break;\r\n                case \'\\t\': break;\r\n                case \'\\n\': break;\r\n                case \'\\r\': break;\r\n                case \';\': break;\r\n                case \' \': break;\r\n                case \'=\': break;\r\n                case \'^\': ;\r\n                case \'*\': ;\r\n                case \'/\': ;\r\n                case \'+\': ;\r\n                case \'-\': ;\r\n                    if (blockOpt > 0) { cc_list[lcnt] += c; } else { cc_list[lcnt++] = c; }\r\n                    break;\r\n                case \'0\': ;\r\n                case \'1\': ;\r\n                case \'2\': ;\r\n                case \'3\': ;\r\n                case \'4\': ;\r\n                case \'5\': ;\r\n                case \'6\': ;\r\n                case \'7\': ;\r\n                case \'8\': ;\r\n                case \'9\': ;\r\n                case \'.\': ;\r\n                case \'x\': ;\r\n                    if (blockOpt > 0) { cc_list[lcnt] += c; }\r\n                    else if (lcnt == 1 && cc_list[lcnt - 1] == \"-\") {\r\n                        cc_list[lcnt - 1] += c;\r\n                    } else if (lcnt > 1 && cc_list[lcnt - 1] == \"-\" && cc_list[lcnt - 2] == \"(\") {\r\n                        cc_list[lcnt - 1] += c;\r\n                    }\r\n                    else if (lcnt > 0 && /\\d+|d+[.]|d+[.]d+/.test(cc_list[lcnt - 1])) {          // /\\d+|d+[.]d+/.  \r\n                        cc_list[lcnt - 1] += c;\r\n                    } else {\r\n                        cc_list[lcnt++] = c;\r\n                    }\r\n                    break;\r\n                default:\r\n            }\r\n        }\r\n        return cc_list;\r\n    }\r\n    exprCalc(expr) {\r\n        let stuck = [];\r\n        for (let i = 0; i < expr.length; i++) {\r\n            let s = expr[i]\r\n            stuck.push(s)\r\n            if (Object.keys(KeySigns).indexOf(s) >= 0) {\r\n                let opt = stuck.pop();\r\n                let d2 = stuck.pop();\r\n                let d1 = stuck.pop();\r\n                let r = 0;\r\n                switch (opt) {\r\n                    case \"+\": r = Number(d1) + Number(d2); break;\r\n                    case \"-\": r = Number(d1) - Number(d2); break;\r\n                    case \"*\": r = Number(d1) * Number(d2); break;\r\n                    case \"/\": r = Number(d1) / Number(d2); break;\r\n                    case \"^\": r = Math.pow(Number(d1), Number(d2)); break;\r\n                }\r\n                stuck.push(r);\r\n            }\r\n        }\r\n        return stuck.pop();\r\n    }\r\n}\r\nIAns1=IAns1.replace(/\\\\times/g,\"*\")\r\n//\\frac{4}{9}\r\nlet CX=new myCalcu();\r\nTE.Val=CX.RunExpr(IAns1,{x:2,y:3,z:4});\r\ndocument.getElementById(\"AnsMsgboxRAns\").innerHTML=TE.Val;\r\nreturn true;','','',0,'2020-10-19','cool','lammou','2020-10-19','cool','lammou','2020-10-19');
/*!40000 ALTER TABLE `qiztx` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2020-10-20  8:39:39
